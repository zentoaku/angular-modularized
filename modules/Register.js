angular.module("#Register",["User"]).config(["$routeProvider",function(e){e.when("/register",{templateUrl:"modules/Register/views/register.html",controller:"RegisterCtrl","public":!0}).when("/confirmRegistration/activationCode/:code",{templateUrl:"modules/Register/views/confirm.html",controller:"RegisterConfirmCtrl","public":!0}).when("/:lang/confirmRegistration/activationCode/:code",{templateUrl:"modules/Register/views/confirm.html",controller:"RegisterConfirmCtrl","public":!0})}]),angular.module("#Register").controller("RegisterConfirmCtrl",["$scope","User","$routeParams",function(e,t,s){e.success="NO SUCCESS",t.registerConfirm(s.code).then(function(t){e.success="SUCCESS"},function(){})}]),angular.module("#Register").controller("RegisterCtrl",["$scope","User","i18n","Auth","$window",function(e,t,s,n,a){n.isMaintenance(function(e,t){200===e&&t.isMaintenance===!0&&window.location.reload()},function(e,t){}),e.user={firstname:"",lastname:"",email:"",password:"",retypePassword:"",gender:"male",salutation:"Mr",newsletterFlag:!1,language:"",country:t.languageToCountryMap[s.currentLanguage]},e.countryList=[],e.captcha={challenge:"",response:""},e.img_src="",e.passDoesntContainFirstName=!0,e.passDoesntContainSurname=!0,e.passDoesntContainNumber=!0,e.passDoesntContainSymbol=!0,e.score=0,e.strengthMetterClass="strength0",e.emailPattern="^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,4}$",e.strengthDesc="label_password_not_entered",e.passwordsMatch=!1;var r=function(){var t=new RegExp(e.user.firstname,"i");e.passDoesntContainFirstName=!t.test(e.user.password);var s=new RegExp(e.user.lastname,"i");e.passDoesntContainSurname=!s.test(e.user.password)},o=function(){e.passwordsMatch=e.user.password===e.user.retypePassword};e.passDoesntContainUpperCase=function(){return!e.user.password.match(/[A-Z]/)},e.passDoesntContainLowerCase=function(){return!e.user.password.match(/[a-z]/)};var i=function(){var t={Mr:"male",Ms:"female"};e.user.gender=t[e.user.salutation]};e.$watch("user.password",r),e.$watch("user.firstname",r),e.$watch("user.lastname",r),e.$watch("user.password",o),e.$watch("user.retypePassword",o),e.$watch("user.salutation",i),e.passStrength=function(){var t=[];t[0]="label_very_weak",t[1]="label_weak",t[2]="label_better",t[3]="label_medium",t[4]="label_strong",t[5]="label_strongest",e.score=0,"undefined"==typeof e.user.password&&(e.user.password=""),e.user.password.length>7&&(e.score+=1),e.user.password.match(/[a-z]/)&&e.user.password.match(/[A-Z]/)&&(e.score+=1),e.user.password.match(/\d+/)?(e.score+=1,e.passDoesntContainNumber=!1):e.passDoesntContainNumber=!0,e.user.password.match(/[`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/)?(e.score+=1,e.passDoesntContainSymbol=!1):e.passDoesntContainSymbol=!0,e.user.password.length>12&&(e.score+=1),e.strengthDesc=t[e.score],e.strengthMetterClass="strength"+e.score},e.loadCaptcha=function(){t.getCaptcha().then(function(t){e.captcha.challenge=t.id,e.img_src="data:image/png;base64,"+t.image},function(){})},e.loadCaptcha(),e.getCountryList=function(){t.getCountryList().then(function(t){e.countryList=t.countries},function(){})},e.getCountryList(),e.submitClick=function(){n.isMaintenance(function(e,t){200===e&&t.isMaintenance===!0&&a.location.reload()},function(e,t){}),e.user.language=s.getCurrentLanguage(),t.register(e.user,e.captcha,function(t,s){e.label("label_dialog_title"),e.label("label_user_registration_success"),e.$apply()},function(t,s){var n=angular.fromJson(s);e.label("label_error"),e.label("label_"+n.code),e.loadCaptcha(),e.$apply()})},angular.element(document).ready(function(){angular.element(window).keydown(function(e){return 13===e.keyCode?(e.preventDefault(),!1):void 0})})}]);