angular.module("NgModular",["ngRoute","ngCookies","AlertService","Auth","#Login","#Dashboard","#Register","#ForgotPassword","Maintenance"]).config(["$routeProvider",function(e){e.otherwise({redirectTo:"/"})}]).run(["$location","$rootScope","$cookies","MaintenanceService",function(e,t,n,a){a.isMaintenance().then(function(){e.path("/maintenance")}),t.$on("$routeChangeStart",function(t,a,r){var o=n.get("reefssid");void 0!==a["public"]&&a["public"]!==!1||void 0!==o||e.path("/unauthorized")}),t.routeVisited=function(e,t){t.lastVisited=e}}]),angular.module("NgModular").controller("IndexCtrl",["$scope",function(e){e.showIfLanguageAllowed=function(){return!0}}]),angular.module("NgModular").controller("LanguageSwitchCtrl",["$scope","i18n",function(e,t){var n="lang-";e.label=function(e){return $.i18n.prop(e)},e.setBodyLanguageClass=function(e){for(var a in t.supportedLanguages)t.supportedLanguages.hasOwnProperty(a)&&angular.element("body").removeClass(n+t.supportedLanguages[a]);angular.element("body").addClass(n+e)},e.languages=t.getSupportedLanguages(),e.getCurrentLanguage=function(){return t.getCurrentLanguage()},e.setCurrentLanguage=function(n){t.setCurrentLanguage(n),e.setBodyLanguageClass(n)},e.setBodyLanguageClass(e.getCurrentLanguage())}]),angular.module("NgModular").controller("MainMenuCtrl",["$scope",function(e){e.items=["dashboard","newsfeed"]}]),angular.module("NgModular").factory("config",function(){var e=(window.location,{});return e.apiCloudCtx="/api/v1",e.apiCloudCtxV2="/api/v2",e.apiCloudCtxV3="/api/v3",e.ENV="LIVE",e.userRefreshRate=36e5,e.refreshRate=6e4,e}),angular.module("NgModular").factory("i18n",["$cookies","$timeout","$filter",function(e,t,n){return new I18n(e,t,n)}]);var I18n=function(e,t,n){this.GC_CURRENT_LANGUAGE="GC_CURRENT_LANGUAGE",this.DATE_COMPARE_PATTERN="yyyy-MM-dd",this.bundlePath="/bundle/",this.currentLanguage=e[this.GC_CURRENT_LANGUAGE],this.filter=n,this.supportedLanguages=["en"]};I18n.prototype={init:function(){this.currentLanguage||(this.currentLanguage="en"),jQuery.i18n.properties({name:"Messages",path:this.bundlePath,mode:"both",cache:!1,language:this.currentLanguage,callback:function(){}})},changeLanguage:function(e){jQuery.i18n.properties({name:"Messages",path:this.bundlePath,mode:"both",cache:!1,callback:function(){}})},getSupportedLanguages:function(){return this.supportedLanguages},prop:function(e){return jQuery.i18n.prop(e)},formatTs:function(e){var t=new Date,n=new Date;n.setDate(t.getDate()-1);var a=this.filter("date")(e,this.DATE_COMPARE_PATTERN),r=this.filter("date")(t,this.DATE_COMPARE_PATTERN),o=this.filter("date")(n,this.DATE_COMPARE_PATTERN),i=this.filter("date")(e,this.prop("label_date_format"));return a===r?i=this.prop("label_today"):a===o&&(i=this.prop("label_yesterday")),i+" "+this.filter("date")(e,this.prop("label_time_format"))},setCurrentLanguage:function(e){this.setCookie(e),this.changeLanguage(e),-1===window.location.href.indexOf("web/"+e)&&(window.location.href=window.location.href.replace(/web\/../g,"web/"+e))},getCookie:function(e){var t,n,a,r=document.cookie.split(";");for(t=0;t<r.length;t++)if(n=r[t].substr(0,r[t].indexOf("=")),a=r[t].substr(r[t].indexOf("=")+1),n=n.replace(/^\s+|\s+$/g,""),n===e)return unescape(a)},setCookie:function(e){document.cookie=this.GC_CURRENT_LANGUAGE+"="+e+"; path=/"},getCurrentLanguage:function(){return this.checkCookie()?this.getCookie(this.GC_CURRENT_LANGUAGE):"en"},checkCookie:function(){var e=this.getCookie(this.GC_CURRENT_LANGUAGE);return null!==e&&-1!==this.supportedLanguages.indexOf(e)}},angular.module("wfe").run(["i18n","$rootScope",function(e,t){e.init(),t.label=function(e){return $.i18n.prop(e)}}]),angular.module("NgModular").directive("langSwitch",function(){return{restrict:"A",transclude:!0,controller:"LanguageSwitchCtrl",scope:{languages:"="},templateUrl:"app/views/langSwitch.html",replace:!0}}),angular.module("NgModular").directive("mainMenu",function(){return{restrict:"E",controller:"MainMenuCtrl",templateUrl:"app/views/main_menu.html",replace:!0}});