angular.module("#Dashboard",["Events","SystemHealth"]).config(["$routeProvider",function(e){e.when("/",{templateUrl:"modules/Dashboard/views/dashboard.html",controller:"DashboardController"})}]),angular.module("#Dashboard").controller("DashboardController",[function(){}]),angular.module("#ForgotPassword",["User"]).config(["$routeProvider",function(e){e.when("/forgot",{templateUrl:"modules/ForgotPassword/views/forgot_password.html",controller:"ForgotPasswordCtrl","public":!0}).when("/confirmForgotPassword/:email/:password",{templateUrl:"modules/ForgotPassword/views/change_password.html",controller:"PasswordChangeCtrl","public":!0})}]),angular.module("#ForgotPassword").controller("ForgotPasswordCtrl",["$scope","User","i18n","Auth","$window",function(e,s,t,o,n){o.isMaintenance(function(e,s){200===e&&s.isMaintenance===!0&&n.location.reload()},function(e,s){}),e.userEmail="",e.submitClick=function(){o.isMaintenance(function(e,s){200===e&&s.isMaintenance===!0&&n.location.reload()},function(e,s){}),s.forgotPassword(e.userEmail,function(e,s){},function(e,s){})}}]),angular.module("#ForgotPassword").controller("PasswordChangeCtrl",["$scope","User","$routeParams","$window",function(e,s,t,o){e.userEmail=t.email,e.oldpassword=t.password,e.strengthDesc="label_password_not_entered",e.score=0,e.strengthMetterClass="strength0",e.password="",o.isActive=!0,$(window).focus(function(){this.isActive=!0}),$(window).blur(function(){this.isActive=!1}),e.conditionsDidNotMet=function(){return e.password!==e.retypePassword||e.score<=3},e.submitClick=function(){s.newPassword(e.userEmail,e.oldpassword,e.password,e.retypePassword,function(){},function(e){})},e.passDoesntContainNumber=!0,e.passDoesntContainSymbol=!0,e.passDoesntContainUpperCase=function(){return!e.password.match(/[A-Z]/)},e.passDoesntContainLowerCase=function(){return!e.password.match(/[a-z]/)},e.passStrength=function(){var s=[];s[0]="label_very_weak",s[1]="label_weak",s[2]="label_better",s[3]="label_medium",s[4]="label_strong",s[5]="label_strongest",e.score=0,"undefined"==typeof e.password&&(e.password=""),e.password.length>7&&e.score++,e.password.match(/[a-z]/)&&e.password.match(/[A-Z]/)&&e.score++,e.password.match(/\d+/)?(e.score++,e.passDoesntContainNumber=!1):e.passDoesntContainNumber=!0,e.password.match(/[`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/)?(e.score++,e.passDoesntContainSymbol=!1):e.passDoesntContainSymbol=!0,e.password.length>12&&e.score++,e.strengthDesc=s[e.score],e.strengthMetterClass="strength"+e.score}}]),angular.module("#Login",["User","Auth"]).config(["$routeProvider",function(e){e.when("/unauthorized",{templateUrl:"modules/Login/views/login.html",controller:"LoginCtrl","public":!0})}]),angular.module("#Login").controller("LoginCtrl",["$scope","User",function(e,s){e.submitLogin=function(){s.login(e.email,e.password)}}]),angular.module("#Register",["User"]).config(["$routeProvider",function(e){e.when("/register",{templateUrl:"modules/Register/views/register.html",controller:"RegisterCtrl","public":!0}).when("/confirmRegistration/activationCode/:code",{templateUrl:"modules/Register/views/confirm.html",controller:"RegisterConfirmCtrl","public":!0}).when("/:lang/confirmRegistration/activationCode/:code",{templateUrl:"modules/Register/views/confirm.html",controller:"RegisterConfirmCtrl","public":!0})}]),angular.module("#Register").controller("RegisterConfirmCtrl",["$scope","User","$routeParams",function(e,s,t){e.success="NO SUCCESS",s.registerConfirm(t.code).then(function(s){e.success="SUCCESS"},function(){})}]),angular.module("#Register").controller("RegisterCtrl",["$scope","User","i18n","Auth","$window",function(e,s,t,o,n){o.isMaintenance(function(e,s){200===e&&s.isMaintenance===!0&&window.location.reload()},function(e,s){}),e.user={firstname:"",lastname:"",email:"",password:"",retypePassword:"",gender:"male",salutation:"Mr",newsletterFlag:!1,language:"",country:s.languageToCountryMap[t.currentLanguage]},e.countryList=[],e.captcha={challenge:"",response:""},e.img_src="",e.passDoesntContainFirstName=!0,e.passDoesntContainSurname=!0,e.passDoesntContainNumber=!0,e.passDoesntContainSymbol=!0,e.score=0,e.strengthMetterClass="strength0",e.emailPattern="^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,4}$",e.strengthDesc="label_password_not_entered",e.passwordsMatch=!1;var r=function(){var s=new RegExp(e.user.firstname,"i");e.passDoesntContainFirstName=!s.test(e.user.password);var t=new RegExp(e.user.lastname,"i");e.passDoesntContainSurname=!t.test(e.user.password)},a=function(){e.passwordsMatch=e.user.password===e.user.retypePassword};e.passDoesntContainUpperCase=function(){return!e.user.password.match(/[A-Z]/)},e.passDoesntContainLowerCase=function(){return!e.user.password.match(/[a-z]/)};var i=function(){var s={Mr:"male",Ms:"female"};e.user.gender=s[e.user.salutation]};e.$watch("user.password",r),e.$watch("user.firstname",r),e.$watch("user.lastname",r),e.$watch("user.password",a),e.$watch("user.retypePassword",a),e.$watch("user.salutation",i),e.passStrength=function(){var s=[];s[0]="label_very_weak",s[1]="label_weak",s[2]="label_better",s[3]="label_medium",s[4]="label_strong",s[5]="label_strongest",e.score=0,"undefined"==typeof e.user.password&&(e.user.password=""),e.user.password.length>7&&(e.score+=1),e.user.password.match(/[a-z]/)&&e.user.password.match(/[A-Z]/)&&(e.score+=1),e.user.password.match(/\d+/)?(e.score+=1,e.passDoesntContainNumber=!1):e.passDoesntContainNumber=!0,e.user.password.match(/[`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/)?(e.score+=1,e.passDoesntContainSymbol=!1):e.passDoesntContainSymbol=!0,e.user.password.length>12&&(e.score+=1),e.strengthDesc=s[e.score],e.strengthMetterClass="strength"+e.score},e.loadCaptcha=function(){s.getCaptcha().then(function(s){e.captcha.challenge=s.id,e.img_src="data:image/png;base64,"+s.image},function(){})},e.loadCaptcha(),e.getCountryList=function(){s.getCountryList().then(function(s){e.countryList=s.countries},function(){})},e.getCountryList(),e.submitClick=function(){o.isMaintenance(function(e,s){200===e&&s.isMaintenance===!0&&n.location.reload()},function(e,s){}),e.user.language=t.getCurrentLanguage(),s.register(e.user,e.captcha,function(s,t){e.label("label_dialog_title"),e.label("label_user_registration_success"),e.$apply()},function(s,t){var o=angular.fromJson(t);e.label("label_error"),e.label("label_"+o.code),e.loadCaptcha(),e.$apply()})},angular.element(document).ready(function(){angular.element(window).keydown(function(e){return 13===e.keyCode?(e.preventDefault(),!1):void 0})})}]);